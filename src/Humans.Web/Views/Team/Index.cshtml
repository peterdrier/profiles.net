@model Humans.Web.Models.TeamIndexViewModel
@{
    ViewData["Title"] = Localizer["Teams_Title"].Value;
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>@Localizer["Teams_Title"]</h1>
    <div class="d-flex gap-2">
        <a asp-action="Birthdays" class="btn btn-outline-secondary">@Localizer["Birthdays_Title"]</a>
        <a asp-action="Map" class="btn btn-outline-secondary">@Localizer["Map_Title"]</a>
        @if (Model.CanCreateTeam)
        {
            <a asp-controller="Admin" asp-action="CreateTeam" class="btn btn-primary">@Localizer["Teams_CreateTeam"]</a>
        }
    </div>
</div>

<vc:temp-data-alerts />

@if (Model.MyTeams.Any())
{
    <h4 class="mb-3">@Localizer["Teams_MyTeamsSection"]</h4>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-4">
        @foreach (var team in Model.MyTeams)
        {
            @await Html.PartialAsync("_TeamCard", team)
        }
    </div>
}
else
{
    <div class="alert alert-light mb-4">
        @Localizer["Teams_NotOnAnyTeam"]
    </div>
}

<h4 class="mb-3">@Localizer["Teams_OtherTeamsSection"]</h4>

@if (Model.Teams.Any())
{
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        @foreach (var team in Model.Teams)
        {
            @await Html.PartialAsync("_TeamCard", team)
        }
    </div>
}
else
{
    <div class="alert alert-info">
        @Localizer["Teams_NoOtherTeams"]
    </div>
}

@if (Model.TotalCount > Model.PageSize)
{
    var totalPages = (int)Math.Ceiling((double)Model.TotalCount / Model.PageSize);
    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            @for (var i = 1; i <= totalPages && i <= 10; i++)
            {
                <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                    <a class="page-link" asp-action="Index" asp-route-page="@i">@i</a>
                </li>
            }
        </ul>
    </nav>
}
