@model Profiles.Web.Models.BirthdayCalendarViewModel
@{
    ViewData["Title"] = Localizer["Birthdays_Title"].Value;

    var prevMonth = Model.CurrentMonth == 1 ? 12 : Model.CurrentMonth - 1;
    var nextMonth = Model.CurrentMonth == 12 ? 1 : Model.CurrentMonth + 1;
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a asp-action="Index">@Localizer["Teams_Title"]</a></li>
        <li class="breadcrumb-item active" aria-current="page">@Localizer["Birthdays_Title"]</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>@Localizer["Birthdays_Title"]</h1>
    <div class="d-flex align-items-center gap-2">
        <a asp-action="Birthdays" asp-route-month="@prevMonth" class="btn btn-outline-secondary btn-sm">
            &laquo;
        </a>
        <span class="fw-semibold">@Model.CurrentMonthName</span>
        <a asp-action="Birthdays" asp-route-month="@nextMonth" class="btn btn-outline-secondary btn-sm">
            &raquo;
        </a>
    </div>
</div>

@if (Model.Birthdays.Count > 0)
{
    <div class="card">
        <div class="card-header">
            @string.Format(Localizer["Birthdays_Count"].Value, Model.Birthdays.Count, Model.CurrentMonthName)
        </div>
        <ul class="list-group list-group-flush">
            @foreach (var birthday in Model.Birthdays)
            {
                <li class="list-group-item d-flex align-items-center py-3">
                    <div class="me-3 text-center" style="min-width: 40px;">
                        <span class="fs-4 fw-bold text-primary">@birthday.DayOfMonth</span>
                    </div>
                    @if (!string.IsNullOrEmpty(birthday.EffectiveProfilePictureUrl))
                    {
                        <img src="@birthday.EffectiveProfilePictureUrl" alt="@birthday.DisplayName" class="rounded-circle me-3" style="width: 48px; height: 48px; object-fit: cover;" />
                    }
                    else
                    {
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center text-white me-3" style="width: 48px; height: 48px; font-size: 1.1rem;">
                            @birthday.DisplayName[0]
                        </div>
                    }
                    <div>
                        <div class="fw-semibold">@birthday.DisplayName</div>
                        @if (birthday.TeamNames.Count > 0)
                        {
                            <small class="text-muted">@string.Join(", ", birthday.TeamNames)</small>
                        }
                    </div>
                </li>
            }
        </ul>
    </div>
}
else
{
    <div class="card">
        <div class="card-body text-center text-muted py-5">
            @string.Format(Localizer["Birthdays_None"].Value, Model.CurrentMonthName)
        </div>
    </div>
}

<div class="mt-3">
    <p class="text-muted small">@Localizer["Birthdays_Privacy"]</p>
</div>
